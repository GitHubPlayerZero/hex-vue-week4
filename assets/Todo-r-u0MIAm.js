import{_ as U,l as A,u as D,a as F,r as n,w as C,o as c,c as i,b as L,v as $,d as t,e as d,f as j,F as N,g as q,t as x,h as a,i as B,j as z,k as O,n as M,p as P,m as R}from"./index-DdYNyWda.js";const G="/hex-vue3-week4/assets/empty-OUh-Azg3.png",y=_=>(P("data-v-ba3ca0f7"),_=_(),R(),_),H={class:"container todoListPage"},J={class:"todoList_Content"},K=y(()=>t("i",{class:"fa-solid fa-plus"},null,-1)),Q=[K],W={key:0,class:"todoList_list"},X={class:"todoList_tab"},Y={class:"todoList_items"},Z={class:"todoList_item"},ee={key:0},te={class:"todoList_label"},oe=["onUpdate:modelValue","onClick"],se=["onClick"],ae=y(()=>t("i",{class:"fa-solid fa-times"},null,-1)),le=[ae],ne={class:"todoList_statistics"},re={class:"text-bold"},ce={key:1,class:"empty"},ie=y(()=>t("p",{class:"empty-desc"},"目前尚無待辦事項",-1)),de=y(()=>t("img",{src:G,alt:"無待辦事項",class:"empty-img"},null,-1)),ue=[ie,de],pe={__name:"Todo",setup(_){const v=A.get(),f=D(),u=F(),h=n(""),p=n(null),l=n([]);C(l,()=>{g.value=0,T.value=0,l.value.forEach(s=>{s.status?g.value++:T.value++}),l.value.length<=0&&(k.value=void 0),M(()=>{S=document.querySelectorAll(".tab-link")})});const w=n(!1);C(w,()=>{M(()=>{p.value.focus()})},{once:!0});async function m(){const s=f.open();try{const o=await a.getTodos(v);l.value=o.data.data,w.value=!0}catch(o){console.error("[getTodoList] error ==>",o),await u.alertError(a.parseError(o))}s.close()}async function E(){const s=f.open(),o=h.value;if(!o){await u.alertError("請先輸入待辦事項！"),p.value.focus(),s.close();return}const e={content:o};try{await a.postTodos(v,e),h.value="",await m()}catch(r){console.error("[addTodo] error ==>",r),await u.alertError(a.parseError(r))}p.value.focus(),s.close()}async function V(s){const o=f.open();try{await a.deleteTodos(v,s),await m()}catch(e){console.error("[deleteTodo] error ==>",e),await u.alertError(a.parseError(e))}l.value.length<=0&&p.value.focus(),o.close()}async function I(s){const o=f.open();try{await a.patchTodosToggle(v,s),await m()}catch(e){console.error("[changeTodoStatus] error ==>",e),await u.alertError(a.parseError(e))}o.close()}const g=n(0),T=n(0);let k=n(void 0),S=[];function b(s,o){k.value=o,S.forEach(e=>{e.classList.remove("active")}),s.target.classList.add("active")}return m(),(s,o)=>(c(),i("div",H,[L(t("div",J,[t("form",{class:"inputBox",onSubmit:d(E,["prevent"])},[L(t("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>h.value=e),ref_key:"refNewTodo",ref:p,type:"text",placeholder:"請輸入待辦事項"},null,512),[[j,h.value,void 0,{trim:!0}]]),t("a",{href:"#",class:"inputBoxAdd",onClick:d(E,["prevent"])},Q)],32),l.value.length>0?(c(),i("div",W,[t("ul",X,[t("li",null,[t("a",{href:"#",class:"tab-link active",onClick:o[1]||(o[1]=d(e=>b(e),["prevent"]))},"全部")]),t("li",null,[t("a",{href:"#",class:"tab-link",onClick:o[2]||(o[2]=d(e=>b(e,!1),["prevent"]))},"待完成")]),t("li",null,[t("a",{href:"#",class:"tab-link",onClick:o[3]||(o[3]=d(e=>b(e,!0),["prevent"]))},"已完成")])]),t("div",Y,[t("ul",Z,[(c(!0),i(N,null,q(l.value,e=>(c(),i(N,{key:e.id},[B(k)===void 0||B(k)===e.status?(c(),i("li",ee,[t("label",te,[L(t("input",{"onUpdate:modelValue":r=>e.status=r,onClick:r=>I(e.id),class:"todoList_input",type:"checkbox",value:"true"},null,8,oe),[[z,e.status]]),t("span",null,x(e.content),1)]),t("a",{href:"#",onClick:d(r=>V(e.id),["prevent"])},le,8,se)])):O("",!0)],64))),128))]),t("div",ne,[t("p",re,x(T.value)+" 個待完成項目",1),t("p",null,x(g.value)+" 個已完成項目",1)])])])):(c(),i("div",ce,ue))],512),[[$,w.value]])]))}},ve=U(pe,[["__scopeId","data-v-ba3ca0f7"]]);export{ve as default};
